2025-07-31 00:32:35,196 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:32:58,025 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:35:24,624 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:35:36,507 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:35:43,046 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:35:47,131 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:35:50,397 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:35:53,521 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:36:01,503 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:36:34,533 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:36:37,292 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:36:40,027 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:37:42,804 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:37:43,358 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 00:37:45,716 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 00:38:27,237 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:38:40,286 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:38:40,946 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 00:38:43,985 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 00:39:14,596 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:39:53,705 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:40:19,168 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:40:34,021 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:40:43,387 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:41:06,728 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:41:26,965 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:41:36,847 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:41:43,089 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:41:43,770 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 00:41:46,582 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 00:42:09,662 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:42:16,532 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:42:17,388 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 00:42:19,934 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 00:42:29,725 - MCPLogger - INFO - [services/mcp_client.py] [c0ffd18b] > Memproses query: 'Hallo'
2025-07-31 00:42:37,763 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 00:42:37,764 - MCPLogger - INFO - [services/mcp_client.py] [c0ffd18b] Intent: other (conf=0.50)
2025-07-31 00:42:38,454 - MCPLogger - ERROR - [services/mcp_client.py] Gagal mendapatkan MCP Tools: 
2025-07-31 00:42:38,455 - MCPLogger - INFO - [services/mcp_client.py] [c0ffd18b] -- Total latency: 8.73s
2025-07-31 00:45:44,561 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:46:17,985 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:50:23,765 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:50:30,494 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:50:37,325 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:50:38,003 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 00:50:41,026 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 00:50:50,751 - MCPLogger - INFO - [services/mcp_client.py] [a072eba8] > Memproses query: 'hallo'
2025-07-31 00:50:53,140 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 00:50:53,141 - MCPLogger - INFO - [services/mcp_client.py] [a072eba8] Intent: other (conf=0.50)
2025-07-31 00:50:58,265 - MCPLogger - WARNING - [services/mcp_client.py] Session closed (ClosedResourceError), reconnecting...: 
2025-07-31 00:50:58,266 - MCPLogger - INFO - [services/mcp_client.py] [a072eba8] -- Total latency: 7.52s
2025-07-31 00:55:18,479 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:56:52,466 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:56:58,847 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 00:57:04,828 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:57:05,516 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 00:57:09,597 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 00:57:50,224 - MCPLogger - INFO - [services/mcp_client.py] [a49380c9] > Memproses query: 'halo dek'
2025-07-31 00:57:53,133 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 00:57:53,133 - MCPLogger - INFO - [services/mcp_client.py] [a49380c9] Intent: other (conf=0.50)
2025-07-31 00:57:53,753 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 00:57:53,754 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 00:57:53,779 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:57:54,422 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 00:57:54,983 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 00:57:55,272 - MCPLogger - INFO - [services/mcp_client.py] [a49380c9] - Turn 1/20
2025-07-31 00:57:57,746 - MCPLogger - INFO - [services/mcp_client.py] [a49380c9] -- Total latency: 7.52s
2025-07-31 00:58:25,400 - MCPLogger - INFO - [services/mcp_client.py] [95494133] > Memproses query: 'siapa decki okmal pratama ?'
2025-07-31 00:58:29,310 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 00:58:29,311 - MCPLogger - INFO - [services/mcp_client.py] [95494133] Intent: other (conf=0.80)
2025-07-31 00:58:29,948 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 00:58:29,949 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 00:58:29,957 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:58:30,517 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 00:58:31,069 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 00:58:31,362 - MCPLogger - INFO - [services/mcp_client.py] [95494133] - Turn 1/20
2025-07-31 00:58:33,813 - MCPLogger - INFO - [services/mcp_client.py] [95494133] -- Total latency: 8.41s
2025-07-31 00:58:59,386 - MCPLogger - INFO - [services/mcp_client.py] [db57e4cb] > Memproses query: 'cari di internet tentang decki okmal pratama'
2025-07-31 00:59:01,484 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 00:59:01,484 - MCPLogger - INFO - [services/mcp_client.py] [db57e4cb] Intent: other (conf=0.80)
2025-07-31 00:59:02,550 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 00:59:02,550 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 00:59:02,560 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:59:03,197 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 00:59:03,729 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 00:59:04,000 - MCPLogger - INFO - [services/mcp_client.py] [db57e4cb] - Turn 1/20
2025-07-31 00:59:05,543 - MCPLogger - INFO - [services/mcp_client.py] [db57e4cb]  · tool 'websearch' args={'query': 'decki okmal pratama'}
2025-07-31 00:59:08,161 - MCPLogger - INFO - [services/mcp_client.py] [db57e4cb] - Turn 2/20
2025-07-31 00:59:12,469 - MCPLogger - INFO - [services/mcp_client.py] [db57e4cb] -- Total latency: 13.08s
2025-07-31 00:59:49,512 - MCPLogger - INFO - [services/mcp_client.py] [5c3141d4] > Memproses query: 'cari di internet tentang setyo wilopo'
2025-07-31 00:59:50,992 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 00:59:50,993 - MCPLogger - INFO - [services/mcp_client.py] [5c3141d4] Intent: other (conf=0.80)
2025-07-31 00:59:51,625 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 00:59:51,626 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 00:59:51,634 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 00:59:52,271 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 00:59:52,801 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 00:59:53,070 - MCPLogger - INFO - [services/mcp_client.py] [5c3141d4] - Turn 1/20
2025-07-31 00:59:54,399 - MCPLogger - INFO - [services/mcp_client.py] [5c3141d4]  · tool 'websearch' args={'query': 'Setyo Wilopo'}
2025-07-31 00:59:56,451 - MCPLogger - INFO - [services/mcp_client.py] [5c3141d4] - Turn 2/20
2025-07-31 01:00:12,653 - MCPLogger - INFO - [services/mcp_client.py] [5c3141d4] -- Total latency: 23.14s
2025-07-31 01:03:15,260 - MCPLogger - INFO - [services/mcp_client.py] [f51c2462] > Memproses query: 'bagaimana risiko proyek firewall core bank sumsel babel ?'
2025-07-31 01:03:17,236 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:03:17,237 - MCPLogger - INFO - [services/mcp_client.py] [f51c2462] Intent: other (conf=0.80)
2025-07-31 01:03:18,337 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:03:18,338 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:03:18,350 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:03:18,985 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:03:19,519 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:03:19,787 - MCPLogger - INFO - [services/mcp_client.py] [f51c2462] - Turn 1/20
2025-07-31 01:03:21,036 - MCPLogger - INFO - [services/mcp_client.py] [f51c2462]  · tool 'rag_retrieval' args={'query': 'risiko proyek firewall core bank sumsel babel'}
2025-07-31 01:03:22,005 - MCPLogger - INFO - [services/mcp_client.py] [f51c2462] - Turn 2/20
2025-07-31 01:03:27,606 - MCPLogger - INFO - [services/mcp_client.py] [f51c2462] -- Total latency: 12.35s
2025-07-31 01:04:33,623 - MCPLogger - INFO - [services/mcp_client.py] [65ba9561] > Memproses query: 'bagaimana risiko terkait aspek financial di proyek tersebut ?'
2025-07-31 01:04:35,232 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:04:35,232 - MCPLogger - INFO - [services/mcp_client.py] [65ba9561] Intent: other (conf=0.80)
2025-07-31 01:04:36,089 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:04:36,090 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:04:36,097 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:04:36,586 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:04:37,119 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:04:37,385 - MCPLogger - INFO - [services/mcp_client.py] [65ba9561] - Turn 1/20
2025-07-31 01:04:46,783 - MCPLogger - INFO - [services/mcp_client.py] [65ba9561] -- Total latency: 13.16s
2025-07-31 01:05:08,149 - MCPLogger - INFO - [services/mcp_client.py] [494d1097] > Memproses query: 'maksud saya adalah proyek firewall core'
2025-07-31 01:05:09,811 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:05:09,812 - MCPLogger - INFO - [services/mcp_client.py] [494d1097] Intent: other (conf=0.80)
2025-07-31 01:05:10,774 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:05:10,775 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:05:10,784 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:05:11,467 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:05:12,023 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:05:12,314 - MCPLogger - INFO - [services/mcp_client.py] [494d1097] - Turn 1/20
2025-07-31 01:05:20,884 - MCPLogger - INFO - [services/mcp_client.py] [494d1097] -- Total latency: 12.73s
2025-07-31 01:06:53,922 - MCPLogger - INFO - [services/mcp_client.py] [89166909] > Memproses query: 'aspek financial proyek firewall core bank sumsel babel ?'
2025-07-31 01:06:55,512 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:06:55,512 - MCPLogger - INFO - [services/mcp_client.py] [89166909] Intent: other (conf=0.80)
2025-07-31 01:06:56,068 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:06:56,068 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:06:56,073 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:06:56,596 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:06:57,127 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:06:57,394 - MCPLogger - INFO - [services/mcp_client.py] [89166909] - Turn 1/20
2025-07-31 01:07:11,925 - MCPLogger - INFO - [services/mcp_client.py] [89166909] -- Total latency: 18.00s
2025-07-31 01:09:17,837 - MCPLogger - INFO - [services/mcp_client.py] [d5558bb9] > Memproses query: 'Hallo'
2025-07-31 01:09:19,091 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 01:09:19,092 - MCPLogger - INFO - [services/mcp_client.py] [d5558bb9] Intent: other (conf=0.50)
2025-07-31 01:09:21,498 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:09:21,499 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:09:21,511 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:09:22,005 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:09:22,564 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:09:22,847 - MCPLogger - INFO - [services/mcp_client.py] [d5558bb9] - Turn 1/20
2025-07-31 01:09:24,958 - MCPLogger - INFO - [services/mcp_client.py] [d5558bb9] -- Total latency: 7.12s
2025-07-31 01:10:02,336 - MCPLogger - INFO - [services/mcp_client.py] [68a32466] > Memproses query: 'kenalin saya Decki, tim presales Lintasarta Palembang. Kalo kamu siapa ?'
2025-07-31 01:10:04,488 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.99}
2025-07-31 01:10:04,488 - MCPLogger - INFO - [services/mcp_client.py] [68a32466] Intent: other (conf=0.99)
2025-07-31 01:10:05,124 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:10:05,125 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:10:05,130 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:10:05,646 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:10:06,175 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:10:06,443 - MCPLogger - INFO - [services/mcp_client.py] [68a32466] - Turn 1/20
2025-07-31 01:10:09,670 - MCPLogger - INFO - [services/mcp_client.py] [68a32466] -- Total latency: 7.33s
2025-07-31 01:11:08,199 - MCPLogger - INFO - [services/mcp_client.py] [fb679069] > Memproses query: 'saya ingin tahu lebih dalam tentang kemampuan yang kamu miliki. bisakah kamu berikan daftar lengkap kemampuanmu ?'
2025-07-31 01:11:09,840 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.9}
2025-07-31 01:11:09,841 - MCPLogger - INFO - [services/mcp_client.py] [fb679069] Intent: other (conf=0.90)
2025-07-31 01:11:10,996 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:11:10,997 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:11:11,003 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:11:11,635 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:11:12,169 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:11:12,441 - MCPLogger - INFO - [services/mcp_client.py] [fb679069] - Turn 1/20
2025-07-31 01:11:18,610 - MCPLogger - INFO - [services/mcp_client.py] [fb679069] -- Total latency: 10.41s
2025-07-31 01:13:00,893 - MCPLogger - INFO - [services/mcp_client.py] [514d9bd5] > Memproses query: 'di dalam database kamu, kamu memiliki informasi tentang apa ?'
2025-07-31 01:13:02,098 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:13:02,099 - MCPLogger - INFO - [services/mcp_client.py] [514d9bd5] Intent: other (conf=0.80)
2025-07-31 01:13:03,846 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:13:03,847 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:13:03,854 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:13:04,492 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:13:05,067 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:13:05,343 - MCPLogger - INFO - [services/mcp_client.py] [514d9bd5] - Turn 1/20
2025-07-31 01:13:09,914 - MCPLogger - INFO - [services/mcp_client.py] [514d9bd5] -- Total latency: 9.02s
2025-07-31 01:13:57,629 - MCPLogger - INFO - [services/mcp_client.py] [630ea86b] > Memproses query: 'coba lihat metadata apa saja yang ada di database kamu ?'
2025-07-31 01:13:59,025 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:13:59,025 - MCPLogger - INFO - [services/mcp_client.py] [630ea86b] Intent: other (conf=0.80)
2025-07-31 01:13:59,600 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:13:59,601 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:13:59,612 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:14:00,255 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:14:00,831 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:14:01,113 - MCPLogger - INFO - [services/mcp_client.py] [630ea86b] - Turn 1/20
2025-07-31 01:14:02,041 - MCPLogger - INFO - [services/mcp_client.py] [630ea86b]  · tool 'list_metadata_entries' args={}
2025-07-31 01:14:02,382 - MCPLogger - INFO - [services/mcp_client.py] [630ea86b] - Turn 2/20
2025-07-31 01:14:06,446 - MCPLogger - INFO - [services/mcp_client.py] [630ea86b] -- Total latency: 8.82s
2025-07-31 01:15:34,141 - MCPLogger - INFO - [services/mcp_client.py] [3785c6dc] > Memproses query: 'cari informasi tentang proyek switch core bank sumsel babel dengan filter tahun 2025'
2025-07-31 01:15:35,508 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:15:35,508 - MCPLogger - INFO - [services/mcp_client.py] [3785c6dc] Intent: other (conf=0.80)
2025-07-31 01:15:36,560 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:15:36,561 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:15:36,568 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:15:37,079 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:15:37,654 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:15:37,942 - MCPLogger - INFO - [services/mcp_client.py] [3785c6dc] - Turn 1/20
2025-07-31 01:15:39,033 - MCPLogger - INFO - [services/mcp_client.py] [3785c6dc]  · tool 'rag_retrieval' args={'query': 'proyek switch core bank sumsel babel', 'metadata_filter': {'tahun': '2025'}}
2025-07-31 01:15:40,201 - MCPLogger - INFO - [services/mcp_client.py] [3785c6dc] - Turn 2/20
2025-07-31 01:15:46,184 - MCPLogger - INFO - [services/mcp_client.py] [3785c6dc] -- Total latency: 12.04s
2025-07-31 01:16:34,144 - MCPLogger - INFO - [services/mcp_client.py] [a93c5653] > Memproses query: 'kapan tanggal submit dokumen untuk proyek firewall core tahun 2025 ini ?'
2025-07-31 01:16:36,602 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:16:36,603 - MCPLogger - INFO - [services/mcp_client.py] [a93c5653] Intent: other (conf=0.80)
2025-07-31 01:16:37,417 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:16:37,419 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:16:37,428 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:16:38,080 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:16:38,645 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:16:38,940 - MCPLogger - INFO - [services/mcp_client.py] [a93c5653] - Turn 1/20
2025-07-31 01:16:42,024 - MCPLogger - INFO - [services/mcp_client.py] [a93c5653]  · tool 'rag_retrieval' args={'query': 'tanggal submit dokumen untuk proyek firewall core tahun 2025'}
2025-07-31 01:16:43,075 - MCPLogger - INFO - [services/mcp_client.py] [a93c5653] - Turn 2/20
2025-07-31 01:16:46,966 - MCPLogger - INFO - [services/mcp_client.py] [a93c5653] -- Total latency: 12.82s
2025-07-31 01:17:47,219 - MCPLogger - INFO - [services/mcp_client.py] [0d5747d7] > Memproses query: 'berikan ringkasan proyek firewall core bank sumsel babel dengan filter tahun 2025 dan proyek firewall core'
2025-07-31 01:17:48,579 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:17:48,579 - MCPLogger - INFO - [services/mcp_client.py] [0d5747d7] Intent: other (conf=0.80)
2025-07-31 01:17:49,268 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:17:49,269 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:17:49,275 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:17:49,892 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:17:50,424 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:17:50,693 - MCPLogger - INFO - [services/mcp_client.py] [0d5747d7] - Turn 1/20
2025-07-31 01:17:52,290 - MCPLogger - INFO - [services/mcp_client.py] [0d5747d7]  · tool 'rag_retrieval' args={'query': 'ringkasan proyek firewall core bank sumsel babel', 'k': 1, 'metadata_filter': {'tahun': '2025', 'project': 'firewall core'}}
2025-07-31 01:17:53,150 - MCPLogger - INFO - [services/mcp_client.py] [0d5747d7] - Turn 2/20
2025-07-31 01:17:58,737 - MCPLogger - INFO - [services/mcp_client.py] [0d5747d7] -- Total latency: 11.52s
2025-07-31 01:19:25,072 - MCPLogger - INFO - [services/mcp_client.py] [3f7de51f] > Memproses query: 'cari informasi tentang roadmap kebutuhan proyek IT di bank sumsel babel melalui internet'
2025-07-31 01:19:26,619 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:19:26,620 - MCPLogger - INFO - [services/mcp_client.py] [3f7de51f] Intent: other (conf=0.80)
2025-07-31 01:19:27,331 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:19:27,332 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:19:27,338 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:19:27,949 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:19:28,480 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:19:28,746 - MCPLogger - INFO - [services/mcp_client.py] [3f7de51f] - Turn 1/20
2025-07-31 01:19:30,526 - MCPLogger - INFO - [services/mcp_client.py] [3f7de51f]  · tool 'websearch' args={'query': 'roadmap kebutuhan proyek IT Bank Sumsel Babel'}
2025-07-31 01:19:33,221 - MCPLogger - INFO - [services/mcp_client.py] [3f7de51f] - Turn 2/20
2025-07-31 01:19:38,127 - MCPLogger - INFO - [services/mcp_client.py] [3f7de51f] -- Total latency: 13.05s
2025-07-31 01:21:22,272 - MCPLogger - INFO - [services/mcp_client.py] [cd7b2fab] > Memproses query: 'cari informasi tender yang sedang di buka oleh bank sumsel babel di internet'
2025-07-31 01:21:24,698 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:21:24,699 - MCPLogger - INFO - [services/mcp_client.py] [cd7b2fab] Intent: other (conf=0.80)
2025-07-31 01:21:25,383 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:21:25,384 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:21:25,392 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:21:26,022 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:21:26,598 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:21:26,890 - MCPLogger - INFO - [services/mcp_client.py] [cd7b2fab] - Turn 1/20
2025-07-31 01:21:28,238 - MCPLogger - INFO - [services/mcp_client.py] [cd7b2fab]  · tool 'websearch' args={'query': 'tender dibuka Bank Sumsel Babel'}
2025-07-31 01:21:30,747 - MCPLogger - INFO - [services/mcp_client.py] [cd7b2fab] - Turn 2/20
2025-07-31 01:21:35,390 - MCPLogger - INFO - [services/mcp_client.py] [cd7b2fab] -- Total latency: 13.12s
2025-07-31 01:26:23,953 - MCPLogger - INFO - [services/mcp_client.py] [96e32f3d] > Memproses query: 'cari pengumuman lelang aktif di eproc bank sumsel babel tahun ini'
2025-07-31 01:26:25,575 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:26:25,575 - MCPLogger - INFO - [services/mcp_client.py] [96e32f3d] Intent: other (conf=0.80)
2025-07-31 01:26:26,645 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:26:26,646 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:26:26,651 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:26:27,248 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:26:27,780 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:26:28,051 - MCPLogger - INFO - [services/mcp_client.py] [96e32f3d] - Turn 1/20
2025-07-31 01:26:30,666 - MCPLogger - INFO - [services/mcp_client.py] [96e32f3d]  · tool 'websearch' args={'query': 'pengumuman lelang aktif site:eproc.bankssbabel.go.id tahun 2023'}
2025-07-31 01:26:40,525 - MCPLogger - ERROR - [services/mcp_client.py] Gagal memanggil MCP tool: list index out of range
2025-07-31 01:26:40,526 - MCPLogger - ERROR - [services/mcp_client.py] [96e32f3d] tool websearch error: list index out of range
2025-07-31 01:26:40,527 - MCPLogger - INFO - [services/mcp_client.py] [96e32f3d] - Turn 2/20
2025-07-31 01:26:44,277 - MCPLogger - INFO - [services/mcp_client.py] [96e32f3d] -- Total latency: 20.32s
2025-07-31 01:28:21,926 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 01:28:33,459 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 01:28:39,492 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:28:40,151 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:28:43,969 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:29:08,656 - MCPLogger - INFO - [services/mcp_client.py] [8683aa3a] > Memproses query: 'cari informasi lelang aktif di eproc bank sumsel babel tahun ini'
2025-07-31 01:29:11,525 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:29:11,525 - MCPLogger - INFO - [services/mcp_client.py] [8683aa3a] Intent: other (conf=0.80)
2025-07-31 01:29:12,033 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:29:12,034 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:29:12,059 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:29:12,696 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:29:13,254 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:29:13,541 - MCPLogger - INFO - [services/mcp_client.py] [8683aa3a] - Turn 1/20
2025-07-31 01:29:14,428 - MCPLogger - INFO - [services/mcp_client.py] [8683aa3a]  · tool 'websearch' args={'query': 'lelang aktif eproc bank sumsel babel 2023'}
2025-07-31 01:29:16,577 - MCPLogger - INFO - [services/mcp_client.py] [8683aa3a] - Turn 2/20
2025-07-31 01:29:25,668 - MCPLogger - INFO - [services/mcp_client.py] [8683aa3a] -- Total latency: 17.01s
2025-07-31 01:31:10,527 - MCPLogger - INFO - [services/mcp_client.py] [5c3d25b8] > Memproses query: 'lelang nya harus yang masih aktif'
2025-07-31 01:31:12,233 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:31:12,234 - MCPLogger - INFO - [services/mcp_client.py] [5c3d25b8] Intent: other (conf=0.80)
2025-07-31 01:31:13,097 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:31:13,098 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:31:13,108 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:31:13,722 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:31:14,252 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:31:14,521 - MCPLogger - INFO - [services/mcp_client.py] [5c3d25b8] - Turn 1/20
2025-07-31 01:31:15,477 - MCPLogger - INFO - [services/mcp_client.py] [5c3d25b8]  · tool 'websearch' args={'query': 'lelang aktif Eproc Bank Sumsel Babel 2023'}
2025-07-31 01:31:17,713 - MCPLogger - INFO - [services/mcp_client.py] [5c3d25b8] - Turn 2/20
2025-07-31 01:31:26,724 - MCPLogger - INFO - [services/mcp_client.py] [5c3d25b8] -- Total latency: 16.20s
2025-07-31 01:32:08,180 - MCPLogger - INFO - [services/mcp_client.py] [114db144] > Memproses query: 'informasi product internet dedicated'
2025-07-31 01:32:09,754 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:32:09,755 - MCPLogger - INFO - [services/mcp_client.py] [114db144] Intent: other (conf=0.80)
2025-07-31 01:32:10,381 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:32:10,382 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:32:10,390 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:32:10,881 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:32:11,413 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:32:11,681 - MCPLogger - INFO - [services/mcp_client.py] [114db144] - Turn 1/20
2025-07-31 01:32:12,668 - MCPLogger - INFO - [services/mcp_client.py] [114db144]  · tool 'rag_retrieval' args={'query': 'internet dedicated'}
2025-07-31 01:32:13,870 - MCPLogger - INFO - [services/mcp_client.py] [114db144] - Turn 2/20
2025-07-31 01:32:34,332 - MCPLogger - INFO - [services/mcp_client.py] [114db144] -- Total latency: 26.15s
2025-07-31 01:34:08,630 - MCPLogger - INFO - [services/mcp_client.py] [3c2aa5c5] > Memproses query: 'percakapan apa saja yang telah kita bahas ?'
2025-07-31 01:34:10,198 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.95}
2025-07-31 01:34:10,199 - MCPLogger - INFO - [services/mcp_client.py] [3c2aa5c5] Intent: other (conf=0.95)
2025-07-31 01:34:10,940 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:34:10,941 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:34:10,953 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:34:11,545 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:34:12,074 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:34:12,341 - MCPLogger - INFO - [services/mcp_client.py] [3c2aa5c5] - Turn 1/20
2025-07-31 01:34:14,434 - MCPLogger - INFO - [services/mcp_client.py] [3c2aa5c5] -- Total latency: 5.80s
2025-07-31 01:36:25,667 - MCPLogger - INFO - [services/mcp_client.py] [6c9ec393] > Memproses query: 'ingat ya, kita baru saja membahas tentang proyek di bank sumsel babel dan product internet dedicated yang dimiliki Lintasarta.'
2025-07-31 01:36:27,444 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:36:27,445 - MCPLogger - INFO - [services/mcp_client.py] [6c9ec393] Intent: other (conf=0.80)
2025-07-31 01:36:38,846 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:36:38,847 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:36:38,857 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:36:39,547 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:36:40,107 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:36:40,396 - MCPLogger - INFO - [services/mcp_client.py] [6c9ec393] - Turn 1/20
2025-07-31 01:36:47,619 - MCPLogger - INFO - [services/mcp_client.py] [6c9ec393] -- Total latency: 21.95s
2025-07-31 01:37:19,072 - MCPLogger - INFO - [services/mcp_client.py] [c0511d42] > Memproses query: 'apa saja yang telah kita bahas ?'
2025-07-31 01:37:20,675 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 01:37:20,675 - MCPLogger - INFO - [services/mcp_client.py] [c0511d42] Intent: other (conf=0.80)
2025-07-31 01:37:21,400 - MCPLogger - WARNING - [services/mcp_client.py] Attempt 1: Session closed, reconnecting…
2025-07-31 01:37:21,401 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 01:37:21,414 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:37:22,063 - MCPLogger - INFO - [services/mcp_client.py] Berhasil terhubung ke MCP Server.
2025-07-31 01:37:22,595 - MCPLogger - INFO - [services/mcp_client.py] Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:37:22,864 - MCPLogger - INFO - [services/mcp_client.py] [c0511d42] - Turn 1/20
2025-07-31 01:37:31,722 - MCPLogger - INFO - [services/mcp_client.py] [c0511d42] -- Total latency: 12.65s
2025-07-31 01:39:48,867 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 01:40:31,839 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 01:55:07,051 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 01:55:13,534 - MCPLogger - INFO - MCPClient initialized
2025-07-31 01:55:15,180 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 01:55:21,489 - MCPLogger - INFO - MCPClient initialized
2025-07-31 01:55:21,603 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 01:55:21,604 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:55:22,469 - MCPLogger - INFO - Berhasil terhubung ke MCP Server
2025-07-31 01:55:26,309 - MCPLogger - INFO - Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:55:26,310 - MCPLogger - INFO - keep_alive_loop dibatalkan
2025-07-31 01:57:51,227 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 01:57:59,439 - MCPLogger - INFO - MCPClient initialized
2025-07-31 01:58:04,794 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 01:58:12,529 - MCPLogger - INFO - MCPClient initialized
2025-07-31 01:58:14,825 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 01:58:14,825 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 01:58:15,418 - MCPLogger - INFO - Berhasil terhubung ke MCP Server
2025-07-31 01:58:17,802 - MCPLogger - INFO - Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 01:58:17,803 - MCPLogger - INFO - keep_alive_loop dibatalkan
2025-07-31 02:07:11,402 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:07:17,594 - MCPLogger - INFO - MCPClient initialized
2025-07-31 02:07:39,413 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:07:47,671 - MCPLogger - INFO - MCPClient initialized
2025-07-31 02:07:49,525 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:07:56,986 - MCPLogger - INFO - MCPClient initialized
2025-07-31 02:08:05,554 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:08:05,555 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:08:08,927 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:08:08,946 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:08:08,946 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:08:11,816 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:08:11,829 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:08:11,831 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:08:16,016 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:08:16,022 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:08:16,023 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:08:19,284 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:08:19,294 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:08:19,296 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:08:22,381 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:08:22,388 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:08:22,389 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:08:30,648 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:08:30,654 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:08:30,654 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:08:33,495 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:08:33,502 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:08:33,504 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:08:36,364 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:08:36,371 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:08:36,373 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:09:09,423 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:09:09,430 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:09:09,431 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:15:03,638 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:15:03,645 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:15:03,646 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:15:04,300 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:15:04,305 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:15:04,369 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:15:04,370 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:15:04,371 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:15:04,378 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:15:06,443 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:15:06,445 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:15:06,452 - MCPLogger - ERROR - Gagal cleanup exit_stack: Attempted to exit a cancel scope that isn't the current tasks's current cancel scope
  + Exception Group Traceback (most recent call last):
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\streamable_http.py", line 498, in streamablehttp_client
    |     yield (
    |     ...<3 lines>...
    |     )
    |   File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    |     cb_suppress = await cb(*exc_details)
    |                   ^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    |     return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
    |            ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    |     raise RuntimeError(
    |     ...<2 lines>...
    |     )
    | RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 235, in __aexit__
    await self.gen.athrow(value)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\streamable_http.py", line 474, in streamablehttp_client
    async with anyio.create_task_group() as tg:
               ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 465, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit a cancel scope that isn't the current tasks's current cancel scope
2025-07-31 02:15:06,454 - MCPLogger - ERROR - Gagal cleanup exit_stack: Attempted to exit cancel scope in a different task than it was entered in
  + Exception Group Traceback (most recent call last):
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 776, in __aexit__
    |     raise exc_val
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 744, in __aexit__
    |     await self._on_completed_fut
    | asyncio.exceptions.CancelledError: Cancelled by cancel scope 18b0ec110d0
    | 
    | During handling of the above exception, another exception occurred:
    | 
    | Traceback (most recent call last):
    |   File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    |     cb_suppress = await cb(*exc_details)
    |                   ^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Python313\Lib\contextlib.py", line 221, in __aexit__
    |     await anext(self.gen)
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\streamable_http.py", line 474, in streamablehttp_client
    |     async with anyio.create_task_group() as tg:
    |                ~~~~~~~~~~~~~~~~~~~~~~~^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 778, in __aexit__
    |     if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
    |        ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 465, in __exit__
    |     raise RuntimeError(
    |     ...<2 lines>...
    |     )
    | RuntimeError: Attempted to exit a cancel scope that isn't the current tasks's current cancel scope
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 02:15:06,474 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:15:06,492 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:15:06,515 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:15:06,516 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:15:07,090 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:15:07,094 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:18:14,238 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:18:24,030 - MCPLogger - INFO - MCPClient initialized
2025-07-31 02:18:25,915 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:18:32,939 - MCPLogger - INFO - MCPClient initialized
2025-07-31 02:19:49,314 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:19:49,314 - MCPLogger - INFO - Menghubungkan ke MCP Server via SSE...
2025-07-31 02:19:49,866 - MCPLogger - WARNING - SSE gagal: unhandled errors in a TaskGroup (1 sub-exception), fallback ke Streamable HTTP...
2025-07-31 02:19:50,343 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:19:50,359 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:19:50,387 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:19:50,388 - MCPLogger - INFO - Menghubungkan ke MCP Server via SSE...
2025-07-31 02:19:50,389 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:19:50,390 - MCPLogger - INFO - Menghubungkan ke MCP Server via SSE...
2025-07-31 02:19:51,793 - MCPLogger - WARNING - SSE gagal: unhandled errors in a TaskGroup (1 sub-exception), fallback ke Streamable HTTP...
2025-07-31 02:19:51,808 - MCPLogger - WARNING - SSE gagal: unhandled errors in a TaskGroup (1 sub-exception), fallback ke Streamable HTTP...
2025-07-31 02:19:53,329 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:19:53,352 - MCPLogger - ERROR - Gagal cleanup exit_stack: unhandled errors in a TaskGroup (1 sub-exception)
  + Exception Group Traceback (most recent call last):
  |   File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
  |     await self.exit_stack.aclose()
  |   File "C:\Python313\Lib\contextlib.py", line 705, in aclose
  |     await self.__aexit__(None, None, None)
  |   File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
  |     raise exc
  |   File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
  |     cb_suppress = await cb(*exc_details)
  |                   ^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Python313\Lib\contextlib.py", line 235, in __aexit__
  |     await self.gen.athrow(value)
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\streamable_http.py", line 474, in streamablehttp_client
  |     async with anyio.create_task_group() as tg:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\streamable_http.py", line 498, in streamablehttp_client
    |     yield (
    |     ...<3 lines>...
    |     )
    |   File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    |     cb_suppress = await cb(*exc_details)
    |                   ^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
    |     raise BaseExceptionGroup(
    |         "unhandled errors in a TaskGroup", self._exceptions
    |     ) from None
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Exception Group Traceback (most recent call last):
      |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
      |     raise BaseExceptionGroup(
      |         "unhandled errors in a TaskGroup", self._exceptions
      |     ) from None
      | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
      +-+---------------- 1 ----------------
        | Exception Group Traceback (most recent call last):
        |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
        |     raise BaseExceptionGroup(
        |         "unhandled errors in a TaskGroup", self._exceptions
        |     ) from None
        | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
        +-+---------------- 1 ----------------
          | Traceback (most recent call last):
          |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
          |     return self.receive_nowait()
          |            ~~~~~~~~~~~~~~~~~~~^^
          |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
          |     raise WouldBlock
          | anyio.WouldBlock
          | 
          | During handling of the above exception, another exception occurred:
          | 
          | Traceback (most recent call last):
          |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 337, in _receive_loop
          |     async for message in self._read_stream:
          |     ...<76 lines>...
          |                 )
          |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\abc\_streams.py", line 35, in __anext__
          |     return await self.receive()
          |            ^^^^^^^^^^^^^^^^^^^^
          |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 119, in receive
          |     await receive_event.wait()
          |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 1774, in wait
          |     await self._event.wait()
          |   File "C:\Python313\Lib\asyncio\locks.py", line 213, in wait
          |     await fut
          | asyncio.exceptions.CancelledError: Cancelled by cancel scope 253cd6bef10
          | 
          | During handling of the above exception, another exception occurred:
          | 
          | Traceback (most recent call last):
          |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 428, in _receive_loop
          |     for id, stream in self._response_streams.items():
          |                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
          | RuntimeError: dictionary changed size during iteration
          +------------------------------------
        | 
        | During handling of the above exception, another exception occurred:
        | 
        | Traceback (most recent call last):
        |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\streamable_http.py", line 498, in streamablehttp_client
        |     yield (
        |     ...<3 lines>...
        |     )
        |   File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
        |     cb_suppress = await cb(*exc_details)
        |                   ^^^^^^^^^^^^^^^^^^^^^^
        |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
        |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
        |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 778, in __aexit__
        |     if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
        |        ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
        |     raise RuntimeError(
        |     ...<2 lines>...
        |     )
        | RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
      | 
      | During handling of the above exception, another exception occurred:
      | 
      | Traceback (most recent call last):
      |   File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
      |     cb_suppress = await cb(*exc_details)
      |                   ^^^^^^^^^^^^^^^^^^^^^^
      |   File "C:\Python313\Lib\contextlib.py", line 235, in __aexit__
      |     await self.gen.athrow(value)
      |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\streamable_http.py", line 474, in streamablehttp_client
      |     async with anyio.create_task_group() as tg:
      |                ~~~~~~~~~~~~~~~~~~~~~~~^^
      |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 778, in __aexit__
      |     if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
      |        ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
      |     raise RuntimeError(
      |     ...<2 lines>...
      |     )
      | RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 02:19:53,435 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:20:51,825 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:20:51,825 - MCPLogger - INFO - Menghubungkan ke MCP Server via SSE...
2025-07-31 02:20:52,325 - MCPLogger - WARNING - SSE gagal: unhandled errors in a TaskGroup (1 sub-exception), fallback ke Streamable HTTP...
2025-07-31 02:20:52,982 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:20:52,992 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:20:53,021 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:20:53,022 - MCPLogger - INFO - Menghubungkan ke MCP Server via SSE...
2025-07-31 02:20:53,023 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:20:53,024 - MCPLogger - INFO - Menghubungkan ke MCP Server via SSE...
2025-07-31 02:20:54,274 - MCPLogger - WARNING - SSE gagal: unhandled errors in a TaskGroup (1 sub-exception), fallback ke Streamable HTTP...
2025-07-31 02:20:54,275 - MCPLogger - WARNING - SSE gagal: unhandled errors in a TaskGroup (1 sub-exception), fallback ke Streamable HTTP...
2025-07-31 02:20:55,429 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:20:55,432 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:20:55,439 - MCPLogger - ERROR - Gagal cleanup exit_stack: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 02:20:55,440 - MCPLogger - ERROR - Gagal cleanup exit_stack: Attempted to exit a cancel scope that isn't the current tasks's current cancel scope
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 776, in __aexit__
    raise exc_val
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 744, in __aexit__
    await self._on_completed_fut
asyncio.exceptions.CancelledError: Cancelled by cancel scope 253cd6be570

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 221, in __aexit__
    await anext(self.gen)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\streamable_http.py", line 474, in streamablehttp_client
    async with anyio.create_task_group() as tg:
               ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 465, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit a cancel scope that isn't the current tasks's current cancel scope
2025-07-31 02:20:55,449 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:20:55,463 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:21:48,060 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:21:53,293 - MCPLogger - INFO - MCPClient initialized
2025-07-31 02:21:58,443 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:21:58,443 - MCPLogger - INFO - Menghubungkan ke MCP Server via SSE...
2025-07-31 02:21:58,989 - MCPLogger - WARNING - SSE gagal: unhandled errors in a TaskGroup (1 sub-exception), fallback ke Streamable HTTP...
2025-07-31 02:21:59,492 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:21:59,505 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:21:59,547 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:21:59,548 - MCPLogger - INFO - Menghubungkan ke MCP Server via SSE...
2025-07-31 02:21:59,548 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:21:59,549 - MCPLogger - INFO - Menghubungkan ke MCP Server via SSE...
2025-07-31 02:22:00,929 - MCPLogger - WARNING - SSE gagal: unhandled errors in a TaskGroup (1 sub-exception), fallback ke Streamable HTTP...
2025-07-31 02:22:00,930 - MCPLogger - WARNING - SSE gagal: unhandled errors in a TaskGroup (1 sub-exception), fallback ke Streamable HTTP...
2025-07-31 02:22:02,422 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:22:02,424 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:22:02,432 - MCPLogger - ERROR - Gagal cleanup exit_stack: Attempted to exit a cancel scope that isn't the current tasks's current cancel scope
  + Exception Group Traceback (most recent call last):
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\streamable_http.py", line 498, in streamablehttp_client
    |     yield (
    |     ...<3 lines>...
    |     )
    |   File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    |     cb_suppress = await cb(*exc_details)
    |                   ^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    |     return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
    |            ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    |     raise RuntimeError(
    |     ...<2 lines>...
    |     )
    | RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 235, in __aexit__
    await self.gen.athrow(value)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\streamable_http.py", line 474, in streamablehttp_client
    async with anyio.create_task_group() as tg:
               ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 465, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit a cancel scope that isn't the current tasks's current cancel scope
2025-07-31 02:22:02,433 - MCPLogger - ERROR - Gagal cleanup exit_stack: Attempted to exit cancel scope in a different task than it was entered in
  + Exception Group Traceback (most recent call last):
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 776, in __aexit__
    |     raise exc_val
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 744, in __aexit__
    |     await self._on_completed_fut
    | asyncio.exceptions.CancelledError: Cancelled by cancel scope 19060daed00
    | 
    | During handling of the above exception, another exception occurred:
    | 
    | Traceback (most recent call last):
    |   File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    |     cb_suppress = await cb(*exc_details)
    |                   ^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Python313\Lib\contextlib.py", line 221, in __aexit__
    |     await anext(self.gen)
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\streamable_http.py", line 474, in streamablehttp_client
    |     async with anyio.create_task_group() as tg:
    |                ~~~~~~~~~~~~~~~~~~~~~~~^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 778, in __aexit__
    |     if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
    |        ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 465, in __exit__
    |     raise RuntimeError(
    |     ...<2 lines>...
    |     )
    | RuntimeError: Attempted to exit a cancel scope that isn't the current tasks's current cancel scope
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 310, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 02:22:02,455 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:22:02,472 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:22:02,507 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:22:02,507 - MCPLogger - INFO - Menghubungkan ke MCP Server via SSE...
2025-07-31 02:22:03,038 - MCPLogger - WARNING - SSE gagal: unhandled errors in a TaskGroup (1 sub-exception), fallback ke Streamable HTTP...
2025-07-31 02:22:03,739 - MCPLogger - ERROR - Gagal connect ke MCP Server: Session terminated
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 92, in connect
    await self.session.initialize()
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 151, in initialize
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<16 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: Session terminated
2025-07-31 02:22:03,744 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:23:49,720 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:23:55,087 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:24:23,843 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:24:30,323 - MCPLogger - INFO - MCPClient initialized
2025-07-31 02:25:00,140 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:25:06,135 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:25:34,994 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:25:40,834 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:25:43,081 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:25:43,081 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/mcp
2025-07-31 02:25:43,836 - MCPLogger - ERROR - Connection to MCP Server failed: unhandled errors in a TaskGroup (1 sub-exception)
  + Exception Group Traceback (most recent call last):
  |   File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
  |     read_stream, write_stream = await self.exit_stack.enter_async_context(
  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |         sse_client(url)
  |         ^^^^^^^^^^^^^^^
  |     )
  |     ^
  |   File "C:\Python313\Lib\contextlib.py", line 668, in enter_async_context
  |     result = await _enter(cm)
  |              ^^^^^^^^^^^^^^^^
  |   File "C:\Python313\Lib\contextlib.py", line 214, in __aenter__
  |     return await anext(self.gen)
  |            ^^^^^^^^^^^^^^^^^^^^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 54, in sse_client
  |     async with anyio.create_task_group() as tg:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 65, in sse_client
    |     event_source.response.raise_for_status()
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    |     raise HTTPStatusError(message, request=request, response=self)
    | httpx.HTTPStatusError: Client error '404 Not Found' for url 'http://localhost:5000/projectwise/mcp'
    | For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
    +------------------------------------
2025-07-31 02:25:43,886 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:25:43,931 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:25:43,932 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:25:43,932 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/mcp
2025-07-31 02:25:43,932 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/mcp
2025-07-31 02:25:45,333 - MCPLogger - ERROR - Connection to MCP Server failed: unhandled errors in a TaskGroup (1 sub-exception)
  + Exception Group Traceback (most recent call last):
  |   File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
  |     read_stream, write_stream = await self.exit_stack.enter_async_context(
  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |         sse_client(url)
  |         ^^^^^^^^^^^^^^^
  |     )
  |     ^
  |   File "C:\Python313\Lib\contextlib.py", line 668, in enter_async_context
  |     result = await _enter(cm)
  |              ^^^^^^^^^^^^^^^^
  |   File "C:\Python313\Lib\contextlib.py", line 214, in __aenter__
  |     return await anext(self.gen)
  |            ^^^^^^^^^^^^^^^^^^^^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 54, in sse_client
  |     async with anyio.create_task_group() as tg:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 65, in sse_client
    |     event_source.response.raise_for_status()
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    |     raise HTTPStatusError(message, request=request, response=self)
    | httpx.HTTPStatusError: Client error '404 Not Found' for url 'http://localhost:5000/projectwise/mcp'
    | For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
    +------------------------------------
2025-07-31 02:25:45,335 - MCPLogger - ERROR - Connection to MCP Server failed: unhandled errors in a TaskGroup (1 sub-exception)
  + Exception Group Traceback (most recent call last):
  |   File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
  |     read_stream, write_stream = await self.exit_stack.enter_async_context(
  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |         sse_client(url)
  |         ^^^^^^^^^^^^^^^
  |     )
  |     ^
  |   File "C:\Python313\Lib\contextlib.py", line 668, in enter_async_context
  |     result = await _enter(cm)
  |              ^^^^^^^^^^^^^^^^
  |   File "C:\Python313\Lib\contextlib.py", line 214, in __aenter__
  |     return await anext(self.gen)
  |            ^^^^^^^^^^^^^^^^^^^^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 54, in sse_client
  |     async with anyio.create_task_group() as tg:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 65, in sse_client
    |     event_source.response.raise_for_status()
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    |     raise HTTPStatusError(message, request=request, response=self)
    | httpx.HTTPStatusError: Client error '404 Not Found' for url 'http://localhost:5000/projectwise/mcp'
    | For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
    +------------------------------------
2025-07-31 02:25:45,342 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:25:45,348 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:25:54,710 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:25:54,710 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/mcp
2025-07-31 02:25:55,377 - MCPLogger - ERROR - Connection to MCP Server failed: unhandled errors in a TaskGroup (1 sub-exception)
  + Exception Group Traceback (most recent call last):
  |   File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
  |     read_stream, write_stream = await self.exit_stack.enter_async_context(
  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |         sse_client(url)
  |         ^^^^^^^^^^^^^^^
  |     )
  |     ^
  |   File "C:\Python313\Lib\contextlib.py", line 668, in enter_async_context
  |     result = await _enter(cm)
  |              ^^^^^^^^^^^^^^^^
  |   File "C:\Python313\Lib\contextlib.py", line 214, in __aenter__
  |     return await anext(self.gen)
  |            ^^^^^^^^^^^^^^^^^^^^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 54, in sse_client
  |     async with anyio.create_task_group() as tg:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 65, in sse_client
    |     event_source.response.raise_for_status()
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    |     raise HTTPStatusError(message, request=request, response=self)
    | httpx.HTTPStatusError: Client error '404 Not Found' for url 'http://localhost:5000/projectwise/mcp'
    | For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
    +------------------------------------
2025-07-31 02:25:55,386 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:25:55,418 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:25:55,419 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/mcp
2025-07-31 02:25:55,420 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:25:55,421 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/mcp
2025-07-31 02:25:56,614 - MCPLogger - ERROR - Connection to MCP Server failed: unhandled errors in a TaskGroup (1 sub-exception)
  + Exception Group Traceback (most recent call last):
  |   File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
  |     read_stream, write_stream = await self.exit_stack.enter_async_context(
  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |         sse_client(url)
  |         ^^^^^^^^^^^^^^^
  |     )
  |     ^
  |   File "C:\Python313\Lib\contextlib.py", line 668, in enter_async_context
  |     result = await _enter(cm)
  |              ^^^^^^^^^^^^^^^^
  |   File "C:\Python313\Lib\contextlib.py", line 214, in __aenter__
  |     return await anext(self.gen)
  |            ^^^^^^^^^^^^^^^^^^^^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 54, in sse_client
  |     async with anyio.create_task_group() as tg:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 65, in sse_client
    |     event_source.response.raise_for_status()
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    |     raise HTTPStatusError(message, request=request, response=self)
    | httpx.HTTPStatusError: Client error '404 Not Found' for url 'http://localhost:5000/projectwise/mcp'
    | For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
    +------------------------------------
2025-07-31 02:25:56,615 - MCPLogger - ERROR - Connection to MCP Server failed: unhandled errors in a TaskGroup (1 sub-exception)
  + Exception Group Traceback (most recent call last):
  |   File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
  |     read_stream, write_stream = await self.exit_stack.enter_async_context(
  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |         sse_client(url)
  |         ^^^^^^^^^^^^^^^
  |     )
  |     ^
  |   File "C:\Python313\Lib\contextlib.py", line 668, in enter_async_context
  |     result = await _enter(cm)
  |              ^^^^^^^^^^^^^^^^
  |   File "C:\Python313\Lib\contextlib.py", line 214, in __aenter__
  |     return await anext(self.gen)
  |            ^^^^^^^^^^^^^^^^^^^^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 54, in sse_client
  |     async with anyio.create_task_group() as tg:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\sse.py", line 65, in sse_client
    |     event_source.response.raise_for_status()
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
    |   File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    |     raise HTTPStatusError(message, request=request, response=self)
    | httpx.HTTPStatusError: Client error '404 Not Found' for url 'http://localhost:5000/projectwise/mcp'
    | For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
    +------------------------------------
2025-07-31 02:25:56,624 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:25:56,631 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:27:39,783 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:27:46,614 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:28:11,128 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:28:16,045 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:28:17,470 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:28:23,426 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:28:33,008 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:28:33,008 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:28:33,851 - MCPLogger - INFO - Connected to MCP Server via SSE
2025-07-31 02:28:35,868 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 02:28:35,869 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 02:28:57,086 - MCPLogger - INFO - [1bec38d0] Processing query: halo
2025-07-31 02:28:59,598 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 02:28:59,599 - MCPLogger - INFO - [1bec38d0] Intent: other (conf=0.50)
2025-07-31 02:29:00,167 - MCPLogger - WARNING - Attempt 1: SSE session closed, reconnecting...
2025-07-31 02:29:00,167 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 305, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:29:00,180 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:29:00,181 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:29:00,977 - MCPLogger - INFO - Connected to MCP Server via SSE
2025-07-31 02:29:00,988 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 02:29:00,998 - MCPLogger - INFO - [1bec38d0] Turn 1/20
2025-07-31 02:29:03,740 - MCPLogger - INFO - [1bec38d0] Total latency: 6.65s
2025-07-31 02:29:03,741 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 02:30:46,199 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:30:51,133 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:31:06,949 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:31:06,950 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:31:07,782 - MCPLogger - INFO - Connected to MCP Server via SSE
2025-07-31 02:31:09,460 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 02:31:09,461 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 02:31:16,973 - MCPLogger - INFO - [067f7aeb] Processing query: halo
2025-07-31 02:31:18,800 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 02:31:18,801 - MCPLogger - INFO - [067f7aeb] Intent: other (conf=0.50)
2025-07-31 02:31:19,360 - MCPLogger - WARNING - Attempt 1: SSE session closed, reconnecting...
2025-07-31 02:31:19,361 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 305, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:31:19,374 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:31:19,375 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:31:20,123 - MCPLogger - INFO - Connected to MCP Server via SSE
2025-07-31 02:31:20,131 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 02:31:20,139 - MCPLogger - INFO - [067f7aeb] Turn 1/20
2025-07-31 02:31:20,865 - MCPLogger - INFO - [067f7aeb] Total latency: 3.89s
2025-07-31 02:31:20,866 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 02:32:29,481 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:32:36,501 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:32:38,812 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:32:45,918 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:32:46,047 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:32:46,048 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:32:47,044 - MCPLogger - INFO - Connected to MCP Server via SSE
2025-07-31 02:32:49,030 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 02:32:49,031 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 02:33:03,105 - MCPLogger - INFO - [6f87b734] Processing query: halo
2025-07-31 02:33:06,016 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 02:33:06,017 - MCPLogger - INFO - [6f87b734] Intent: other (conf=0.50)
2025-07-31 02:33:06,817 - MCPLogger - WARNING - Attempt 1: SSE session closed, reconnecting...
2025-07-31 02:33:06,818 - MCPLogger - ERROR - Gagal cleanup exit_stack: generator didn't stop after athrow()
Traceback (most recent call last):
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 308, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 02:33:06,832 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:33:06,833 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:33:07,651 - MCPLogger - INFO - Connected to MCP Server via SSE
2025-07-31 02:33:07,666 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 02:33:07,678 - MCPLogger - INFO - [6f87b734] Turn 1/20
2025-07-31 02:33:09,590 - MCPLogger - INFO - [6f87b734] Total latency: 6.49s
2025-07-31 02:33:09,591 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 02:35:11,700 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:35:16,279 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:35:33,423 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:35:41,306 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:35:44,533 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:35:51,030 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:35:59,485 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:36:05,554 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:36:36,298 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:36:43,138 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:37:00,930 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:00,931 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:37:00,931 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
    ) = await self._sse_context.__aexit__()  # manual async generator entry
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:37:00,936 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:00,964 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:00,964 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:37:00,965 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
    ) = await self._sse_context.__aexit__()  # manual async generator entry
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:37:00,966 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:00,966 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:00,966 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:37:00,967 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
    ) = await self._sse_context.__aexit__()  # manual async generator entry
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:37:00,968 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:06,563 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:06,564 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:37:06,564 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
    ) = await self._sse_context.__aexit__()  # manual async generator entry
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:37:06,565 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:06,590 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:06,591 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:37:06,592 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:06,592 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
    ) = await self._sse_context.__aexit__()  # manual async generator entry
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:37:06,592 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:37:06,593 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:06,594 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
    ) = await self._sse_context.__aexit__()  # manual async generator entry
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:37:06,595 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:07,650 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:07,650 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:37:07,651 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
    ) = await self._sse_context.__aexit__()  # manual async generator entry
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:37:07,652 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:07,682 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:07,682 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:37:07,683 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
    ) = await self._sse_context.__aexit__()  # manual async generator entry
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:37:07,684 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:07,685 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:37:07,686 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:37:07,686 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 78, in connect
    ) = await self._sse_context.__aexit__()  # manual async generator entry
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:37:07,688 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 02:40:37,551 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:40:42,220 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:40:43,640 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:40:48,277 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:40:48,386 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:40:48,387 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:40:48,387 - MCPLogger - ERROR - Connection to MCP Server failed: '_AsyncGeneratorContextManager' object has no attribute '__anext__'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?
2025-07-31 02:40:48,391 - MCPLogger - ERROR - cleanup failed: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 175, in cleanup
    await self._sse_context.aclose()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
2025-07-31 02:40:48,393 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:40:48,431 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:40:48,432 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:40:48,432 - MCPLogger - ERROR - Connection to MCP Server failed: '_AsyncGeneratorContextManager' object has no attribute '__anext__'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?
2025-07-31 02:40:48,434 - MCPLogger - ERROR - cleanup failed: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 175, in cleanup
    await self._sse_context.aclose()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
2025-07-31 02:40:48,435 - MCPLogger - ERROR - cleanup failed: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 175, in cleanup
    await self._sse_context.aclose()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
2025-07-31 02:40:48,437 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:40:48,440 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:40:48,441 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:40:48,441 - MCPLogger - ERROR - Connection to MCP Server failed: '_AsyncGeneratorContextManager' object has no attribute '__anext__'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?
2025-07-31 02:40:48,445 - MCPLogger - ERROR - cleanup failed: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 175, in cleanup
    await self._sse_context.aclose()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
2025-07-31 02:40:48,449 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:41:16,111 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:41:22,579 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:41:22,691 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:41:22,691 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:41:22,692 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__aexit__()
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:41:22,695 - MCPLogger - ERROR - cleanup failed: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__aexit__()
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 175, in cleanup
    await self._sse_context.aclose()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
2025-07-31 02:41:22,697 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:41:22,729 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:41:22,729 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:41:22,730 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__aexit__()
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:41:22,731 - MCPLogger - ERROR - cleanup failed: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 175, in cleanup
    await self._sse_context.aclose()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
2025-07-31 02:41:22,732 - MCPLogger - ERROR - cleanup failed: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__aexit__()
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 175, in cleanup
    await self._sse_context.aclose()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
2025-07-31 02:41:22,733 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:41:22,735 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:41:22,736 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:41:22,739 - MCPLogger - ERROR - Connection to MCP Server failed: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__aexit__()
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'
2025-07-31 02:41:22,743 - MCPLogger - ERROR - cleanup failed: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__aexit__()
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: _AsyncGeneratorContextManager.__aexit__() missing 3 required positional arguments: 'typ', 'value', and 'traceback'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 175, in cleanup
    await self._sse_context.aclose()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
2025-07-31 02:41:22,746 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:42:10,516 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:42:15,126 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:43:28,653 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:43:33,512 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:43:38,103 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:43:45,541 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:43:45,715 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:43:45,715 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:43:45,716 - MCPLogger - ERROR - Connection to MCP Server failed: '_AsyncGeneratorContextManager' object has no attribute '__anext__'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?
2025-07-31 02:43:45,722 - MCPLogger - ERROR - cleanup failed: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 175, in cleanup
    await self._sse_context.aclose()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
2025-07-31 02:43:45,728 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:43:45,805 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:43:45,806 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:43:45,807 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:43:45,808 - MCPLogger - INFO - Connecting to MCP Server via SSE: http://localhost:5000/projectwise/sse
2025-07-31 02:43:45,808 - MCPLogger - ERROR - Connection to MCP Server failed: '_AsyncGeneratorContextManager' object has no attribute '__anext__'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?
2025-07-31 02:43:45,809 - MCPLogger - ERROR - Connection to MCP Server failed: '_AsyncGeneratorContextManager' object has no attribute '__anext__'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?
2025-07-31 02:43:45,812 - MCPLogger - ERROR - cleanup failed: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 175, in cleanup
    await self._sse_context.aclose()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
2025-07-31 02:43:45,816 - MCPLogger - ERROR - cleanup failed: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 73, in connect
    read_stream, write_stream = await self._sse_context.__anext__()
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute '__anext__'. Did you mean: '__aexit__'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 175, in cleanup
    await self._sse_context.aclose()
          ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: '_AsyncGeneratorContextManager' object has no attribute 'aclose'
2025-07-31 02:43:45,820 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:43:45,825 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 02:46:12,852 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:46:19,018 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 02:51:44,558 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:51:51,376 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:51:57,228 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:52:59,861 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:53:09,454 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:53:16,896 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:53:26,405 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:54:30,002 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:54:36,060 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:54:41,615 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 02:55:33,087 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 02:55:40,106 - MCPLogger - WARNING - Streamable HTTP gagal:, fallback ke SSE...
2025-07-31 02:55:40,955 - MCPLogger - INFO - Berhasil terhubung ke MCP Server.
2025-07-31 02:55:42,823 - MCPLogger - INFO - Tools tersedia: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 02:59:21,184 - MCPLogger - INFO - [94ee8a17] > Memproses query: 'halo'
2025-07-31 02:59:23,868 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 02:59:23,869 - MCPLogger - INFO - [94ee8a17] Intent: other (conf=0.50)
2025-07-31 02:59:24,435 - MCPLogger - ERROR - Gagal mendapatkan MCP Tools: 
2025-07-31 02:59:24,436 - MCPLogger - INFO - [94ee8a17] -- Total latency: 3.25s
2025-07-31 03:00:10,235 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:00:16,481 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 03:00:28,698 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:00:37,171 - MCPLogger - INFO - MCPClient initialized with SSE transport
2025-07-31 03:02:29,584 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:02:34,445 - MCPLogger - INFO - MCPClient initialized
2025-07-31 03:02:35,806 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:02:42,091 - MCPLogger - INFO - MCPClient initialized
2025-07-31 03:02:42,200 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 03:02:42,201 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:02:43,019 - MCPLogger - ERROR - Gagal cleanup: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 307, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 03:02:43,031 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 03:02:43,032 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:02:43,983 - MCPLogger - ERROR - Gagal cleanup: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 307, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 03:02:43,993 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 03:02:43,994 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:02:45,945 - MCPLogger - ERROR - Gagal cleanup: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 307, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 03:02:45,951 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 03:02:45,952 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:02:46,735 - MCPLogger - ERROR - Gagal cleanup: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 307, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 03:02:46,743 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 03:02:46,745 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:02:47,596 - MCPLogger - ERROR - Gagal cleanup: generator didn't stop after athrow()
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 307, in cleanup
    await self.exit_stack.aclose()
  File "C:\Python313\Lib\contextlib.py", line 705, in aclose
    await self.__aexit__(None, None, None)
  File "C:\Python313\Lib\contextlib.py", line 768, in __aexit__
    raise exc
  File "C:\Python313\Lib\contextlib.py", line 751, in __aexit__
    cb_suppress = await cb(*exc_details)
                  ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\contextlib.py", line 271, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
2025-07-31 03:02:47,602 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 03:02:47,603 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:02:56,256 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:03:05,321 - MCPLogger - INFO - MCPClient initialized
2025-07-31 03:03:05,449 - MCPLogger - INFO - Cleanup selesai, MCPClient disconnected
2025-07-31 03:03:05,450 - MCPLogger - INFO - Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:03:12,632 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:03:20,207 - MCPLogger - INFO - MCPClient initialized
2025-07-31 03:08:30,156 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:08:36,547 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:10:22,660 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:10:24,279 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:10:24,810 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:10:25,326 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:10:30,874 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:10:31,412 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:10:31,947 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:11:02,524 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:12:03,110 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:17:03,706 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:17:33,728 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:17:38,488 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:17:39,089 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:17:39,610 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:18:28,299 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:18:35,086 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:18:40,163 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:18:41,765 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:18:42,403 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:18:42,973 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:21:38,477 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:21:43,182 - MCPLogger - INFO - MCPClient initialized
2025-07-31 03:21:44,662 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:21:50,413 - MCPLogger - INFO - MCPClient initialized
2025-07-31 03:21:51,328 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:21:55,142 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:21:57,744 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:22:00,456 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:22:08,196 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:22:41,140 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:22:43,838 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:22:46,609 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:23:33,057 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:23:33,551 - MCPLogger - ERROR - [services/mcp_client.py] Gagal terhubung ke MCP Server: Session terminated
2025-07-31 03:23:33,558 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: generator didn't stop after athrow()
2025-07-31 03:24:04,046 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:24:17,176 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:24:22,588 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:24:23,255 - MCPLogger - ERROR - [services/mcp_client.py] Gagal terhubung ke MCP Server: Session terminated
2025-07-31 03:24:23,273 - MCPLogger - INFO - [services/mcp_client.py] Terputus dari MCP Server.
2025-07-31 03:24:23,314 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:24:23,315 - MCPLogger - INFO - [services/mcp_client.py] Menghubungkan ke MCP Server via streamable HTTP...
2025-07-31 03:24:24,751 - MCPLogger - ERROR - [services/mcp_client.py] Gagal terhubung ke MCP Server: Session terminated
2025-07-31 03:24:24,752 - MCPLogger - ERROR - [services/mcp_client.py] Gagal terhubung ke MCP Server: Session terminated
2025-07-31 03:24:24,757 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: Attempted to exit a cancel scope that isn't the current tasks's current cancel scope
2025-07-31 03:24:24,757 - MCPLogger - ERROR - [services/mcp_client.py] Gagal saat cleanup: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 03:28:41,102 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:28:51,998 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 03:28:53,951 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:28:59,720 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 03:29:55,975 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 03:29:55,975 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 03:29:56,593 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 03:29:58,699 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 03:29:58,700 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 03:30:19,269 - MCPLogger - INFO - [8b43f9bb] Processing query: halo
2025-07-31 03:30:22,922 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 03:30:22,923 - MCPLogger - INFO - [8b43f9bb] Intent: other (conf=0.50)
2025-07-31 03:30:23,659 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 03:30:23,660 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 03:30:23,672 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 03:30:23,672 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 03:30:24,170 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 03:30:24,744 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 03:30:25,018 - MCPLogger - INFO - [8b43f9bb] - Turn 1/20
2025-07-31 03:30:27,605 - MCPLogger - INFO - [8b43f9bb] Total latency: 8.34s
2025-07-31 03:30:27,607 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 03:32:05,908 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:32:12,855 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 03:32:19,910 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:32:26,369 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 03:41:18,349 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:41:23,203 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 03:41:24,832 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:41:30,985 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 03:41:39,970 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 03:41:39,970 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 03:41:40,679 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 03:41:43,303 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 03:41:43,304 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 03:41:43,327 - MCPLogger - INFO - [88d5a7e4] Processing query: halo
2025-07-31 03:41:45,620 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 03:41:45,620 - MCPLogger - INFO - [88d5a7e4] Intent: other (conf=0.50)
2025-07-31 03:41:46,381 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 03:41:46,382 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 106, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 169, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 03:41:46,400 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 03:41:46,401 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 03:41:47,127 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 03:41:47,661 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 03:41:47,932 - MCPLogger - INFO - [88d5a7e4] - Turn 1/20
2025-07-31 03:41:49,481 - MCPLogger - INFO - [88d5a7e4] Total latency: 6.15s
2025-07-31 03:41:49,483 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 03:42:44,266 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 03:42:49,035 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 04:00:58,265 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 04:01:02,848 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 04:01:04,207 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 04:01:08,927 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 04:01:10,657 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 04:01:10,657 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 04:01:11,254 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 04:01:14,765 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 04:01:14,767 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 04:01:14,798 - MCPLogger - INFO - [237b4b5b] Processing query: siapa saya
2025-07-31 04:01:16,770 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.1}
2025-07-31 04:01:16,771 - MCPLogger - INFO - [237b4b5b] Intent: other (conf=0.10)
2025-07-31 04:01:17,984 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 04:01:17,984 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 04:01:17,995 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 04:01:17,995 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 04:01:18,483 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 04:01:19,014 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 04:01:19,282 - MCPLogger - INFO - [237b4b5b] - Turn 1/20
2025-07-31 04:01:35,570 - MCPLogger - INFO - [237b4b5b] Total latency: 20.77s
2025-07-31 04:01:35,571 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 04:04:27,351 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 04:04:40,982 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 04:04:49,046 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 04:04:55,669 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 04:05:33,008 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 04:05:41,796 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 04:05:43,752 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 04:05:51,740 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 04:05:51,897 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 04:05:51,898 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 04:06:25,397 - MCPLogger - ERROR - cleanup failed: 'ClientSession' object has no attribute 'close'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 165, in cleanup
    await self.session.close()
          ^^^^^^^^^^^^^^^^^^
AttributeError: 'ClientSession' object has no attribute 'close'
2025-07-31 04:06:25,401 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 04:06:25,401 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 04:06:29,850 - MCPLogger - ERROR - cleanup failed: 'ClientSession' object has no attribute 'close'
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 165, in cleanup
    await self.session.close()
          ^^^^^^^^^^^^^^^^^^
AttributeError: 'ClientSession' object has no attribute 'close'
2025-07-31 04:06:29,851 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 04:06:29,852 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 04:07:39,100 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 04:07:44,129 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 04:07:45,791 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 04:07:51,903 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 04:07:52,040 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 04:07:52,041 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 04:07:52,772 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 04:07:55,698 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 04:07:55,699 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 04:08:47,652 - MCPLogger - INFO - [92a1ebde] Processing query: halo dek
2025-07-31 04:08:50,094 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 04:08:50,094 - MCPLogger - INFO - [92a1ebde] Intent: other (conf=0.50)
2025-07-31 04:08:50,595 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 04:08:50,596 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 04:08:50,621 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 04:08:50,622 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 04:08:51,332 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 04:08:51,907 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 04:08:52,194 - MCPLogger - INFO - [92a1ebde] - Turn 1/20
2025-07-31 04:08:53,547 - MCPLogger - INFO - [92a1ebde] Total latency: 5.90s
2025-07-31 04:08:53,548 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 04:09:16,494 - MCPLogger - INFO - [3f3bf044] Processing query: cek berita tentang AI hari ini
2025-07-31 04:09:18,229 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 04:09:18,229 - MCPLogger - INFO - [3f3bf044] Intent: other (conf=0.80)
2025-07-31 04:09:18,838 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 04:09:18,838 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 04:09:18,844 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 04:09:18,844 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 04:09:19,364 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 04:09:19,892 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 04:09:20,158 - MCPLogger - INFO - [3f3bf044] - Turn 1/20
2025-07-31 04:09:21,832 - MCPLogger - INFO - [3f3bf044]  · tool 'websearch' args={'query': 'berita AI hari ini'}
2025-07-31 04:09:24,752 - MCPLogger - INFO - [3f3bf044] - Turn 2/20
2025-07-31 04:09:34,636 - MCPLogger - INFO - [3f3bf044] Total latency: 18.14s
2025-07-31 04:09:34,637 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 04:10:38,109 - MCPLogger - INFO - [f1044435] Processing query: rangkum berita tersebut untuk saya
2025-07-31 04:10:39,444 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 04:10:39,444 - MCPLogger - INFO - [f1044435] Intent: other (conf=0.80)
2025-07-31 04:10:40,257 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 04:10:40,258 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 04:10:40,264 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 04:10:40,265 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 04:10:40,980 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 04:10:41,512 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 04:10:41,779 - MCPLogger - INFO - [f1044435] - Turn 1/20
2025-07-31 04:10:43,267 - MCPLogger - INFO - [f1044435] Total latency: 5.16s
2025-07-31 04:10:43,268 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:01:28,854 - MCPLogger - INFO - [7a2d5d81] Processing query: hallo
2025-07-31 16:01:30,733 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 16:01:30,734 - MCPLogger - INFO - [7a2d5d81] Intent: other (conf=0.50)
2025-07-31 16:01:32,231 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:01:32,232 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:01:32,242 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:01:32,243 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:01:32,881 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:01:33,513 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:01:33,789 - MCPLogger - INFO - [7a2d5d81] - Turn 1/20
2025-07-31 16:01:35,650 - MCPLogger - INFO - [7a2d5d81] Total latency: 6.80s
2025-07-31 16:01:35,654 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:02:00,399 - MCPLogger - INFO - [025e1355] Processing query: apa saja kemampuan yang kamu miliki ?
2025-07-31 16:02:01,648 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 16:02:01,648 - MCPLogger - INFO - [025e1355] Intent: other (conf=0.80)
2025-07-31 16:02:02,851 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:02:02,851 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:02:02,854 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:02:02,855 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:02:03,337 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:02:03,871 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:02:04,148 - MCPLogger - INFO - [025e1355] - Turn 1/20
2025-07-31 16:02:09,035 - MCPLogger - INFO - [025e1355] Total latency: 8.64s
2025-07-31 16:02:09,037 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:02:50,901 - MCPLogger - INFO - [bdc5ca0a] Processing query: coba cek lelang aktif di eproc bank sumsel babel
2025-07-31 16:02:52,981 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 16:02:52,981 - MCPLogger - INFO - [bdc5ca0a] Intent: other (conf=0.80)
2025-07-31 16:02:54,568 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:02:54,568 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:02:54,572 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:02:54,572 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:02:55,066 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:02:55,617 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:02:55,904 - MCPLogger - INFO - [bdc5ca0a] - Turn 1/20
2025-07-31 16:02:57,123 - MCPLogger - INFO - [bdc5ca0a]  · tool 'websearch' args={'query': 'lelang aktif eproc Bank Sumsel Babel'}
2025-07-31 16:02:59,959 - MCPLogger - INFO - [bdc5ca0a] - Turn 2/20
2025-07-31 16:03:10,768 - MCPLogger - INFO - [bdc5ca0a] Total latency: 19.87s
2025-07-31 16:03:10,769 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:03:57,948 - MCPLogger - INFO - [b2b8402a] Processing query: cari informasi di internet tentang razif three dharmawan
2025-07-31 16:04:00,445 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 16:04:00,446 - MCPLogger - INFO - [b2b8402a] Intent: other (conf=0.80)
2025-07-31 16:04:05,210 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:04:05,211 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:04:05,214 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:04:05,214 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:04:05,718 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:04:06,259 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:04:06,537 - MCPLogger - INFO - [b2b8402a] - Turn 1/20
2025-07-31 16:04:08,074 - MCPLogger - INFO - [b2b8402a]  · tool 'websearch' args={'query': 'Razif Three Dharmawan'}
2025-07-31 16:04:11,000 - MCPLogger - INFO - [b2b8402a] - Turn 2/20
2025-07-31 16:04:27,246 - MCPLogger - INFO - [b2b8402a] Total latency: 29.30s
2025-07-31 16:04:27,247 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:05:21,436 - MCPLogger - INFO - [a90143f7] Processing query: rangkum apa yang telah kita bahas
2025-07-31 16:05:23,409 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 16:05:23,409 - MCPLogger - INFO - [a90143f7] Intent: other (conf=0.80)
2025-07-31 16:05:24,641 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:05:24,642 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:05:24,645 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:05:24,645 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:05:25,155 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:05:25,694 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:05:25,985 - MCPLogger - INFO - [a90143f7] - Turn 1/20
2025-07-31 16:05:39,361 - MCPLogger - INFO - [a90143f7] Total latency: 17.93s
2025-07-31 16:05:39,362 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:06:30,956 - MCPLogger - INFO - [bfee8c7d] Processing query: siapa Razif Three Dharmawan ?
2025-07-31 16:06:32,434 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 16:06:32,435 - MCPLogger - INFO - [bfee8c7d] Intent: other (conf=0.80)
2025-07-31 16:06:33,319 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:06:33,320 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:06:33,329 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:06:33,330 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:06:34,430 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:06:34,989 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:06:35,279 - MCPLogger - INFO - [bfee8c7d] - Turn 1/20
2025-07-31 16:06:49,686 - MCPLogger - INFO - [bfee8c7d] Total latency: 18.73s
2025-07-31 16:06:49,686 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:07:24,986 - MCPLogger - INFO - [c6e92256] Processing query: ingat Razif Three Dharmawan adalah engineer di Lintasarta Palembang dan dia suka ngopi diluar
2025-07-31 16:07:26,307 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 16:07:26,309 - MCPLogger - INFO - [c6e92256] Intent: other (conf=0.80)
2025-07-31 16:07:29,488 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:07:29,490 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:07:29,499 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:07:29,500 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:07:30,521 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:07:31,104 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:07:31,402 - MCPLogger - INFO - [c6e92256] - Turn 1/20
2025-07-31 16:07:45,445 - MCPLogger - INFO - [c6e92256] Total latency: 20.46s
2025-07-31 16:07:45,446 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:08:07,933 - MCPLogger - INFO - [d7d94a20] Processing query: siapa Razif Three Dharmawan?
2025-07-31 16:08:09,368 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 16:08:09,371 - MCPLogger - INFO - [d7d94a20] Intent: other (conf=0.80)
2025-07-31 16:08:10,761 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:08:10,762 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:08:10,771 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:08:10,772 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:08:11,823 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:08:12,385 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:08:12,671 - MCPLogger - INFO - [d7d94a20] - Turn 1/20
2025-07-31 16:08:28,361 - MCPLogger - INFO - [d7d94a20] Total latency: 20.43s
2025-07-31 16:08:28,363 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:09:52,914 - MCPLogger - INFO - [9ee8fd70] Processing query: Razif Three Dharmawan biasa di panggil razif, dia tidak terlibat dalam proyek dan proposal. Selain itu, ia juga tidak sedang mencari berita tentang kecerdasan buatan (AI) dan tidak sedang mencari informasi tentang produk Internet Dedicated yang dimiliki oleh Lintasarta .
2025-07-31 16:09:54,521 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.9}
2025-07-31 16:09:54,523 - MCPLogger - INFO - [9ee8fd70] Intent: other (conf=0.90)
2025-07-31 16:09:55,307 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:09:55,308 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:09:55,315 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:09:55,315 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:09:56,351 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:09:56,968 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:09:57,257 - MCPLogger - INFO - [9ee8fd70] - Turn 1/20
2025-07-31 16:10:15,285 - MCPLogger - INFO - [9ee8fd70] Total latency: 22.37s
2025-07-31 16:10:15,286 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:12:32,570 - MCPLogger - INFO - [aa17be87] Processing query: cari informasi no handphone razif Three Dharmawan
2025-07-31 16:12:34,146 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.0}
2025-07-31 16:12:34,147 - MCPLogger - INFO - [aa17be87] Intent: other (conf=0.00)
2025-07-31 16:12:35,401 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:12:35,402 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:12:35,406 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:12:35,406 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:12:36,454 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:12:37,082 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:12:37,381 - MCPLogger - INFO - [aa17be87] - Turn 1/20
2025-07-31 16:12:40,189 - MCPLogger - INFO - [aa17be87] Total latency: 7.62s
2025-07-31 16:12:40,190 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:13:03,977 - MCPLogger - INFO - [e24d3c47] Processing query: coba cek informasi razif Three Dharmawan dari profile facebook nya
2025-07-31 16:13:05,381 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.1}
2025-07-31 16:13:05,382 - MCPLogger - INFO - [e24d3c47] Intent: other (conf=0.10)
2025-07-31 16:13:06,129 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:13:06,130 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:13:06,140 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:13:06,141 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:13:07,403 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:13:07,965 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:13:08,253 - MCPLogger - INFO - [e24d3c47] - Turn 1/20
2025-07-31 16:13:11,456 - MCPLogger - INFO - [e24d3c47] Total latency: 7.48s
2025-07-31 16:13:11,457 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 16:13:27,087 - MCPLogger - INFO - [9cd9b173] Processing query: coba cek informasi razif Three Dharmawan dari profile facebook nya di internet
2025-07-31 16:13:28,722 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.1}
2025-07-31 16:13:28,724 - MCPLogger - INFO - [9cd9b173] Intent: other (conf=0.10)
2025-07-31 16:13:29,535 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 16:13:29,536 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 16:13:29,545 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 16:13:29,546 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 16:13:30,620 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 16:13:31,194 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 16:13:31,497 - MCPLogger - INFO - [9cd9b173] - Turn 1/20
2025-07-31 16:13:33,315 - MCPLogger - INFO - [9cd9b173]  · tool 'websearch' args={'query': 'Razif Three Dharmawan Facebook profile'}
2025-07-31 16:13:35,898 - MCPLogger - INFO - [9cd9b173] - Turn 2/20
2025-07-31 16:13:45,272 - MCPLogger - INFO - [9cd9b173] Total latency: 18.19s
2025-07-31 16:13:45,275 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 19:06:37,946 - MCPLogger - INFO - [a9ced5e3] Processing query: cari informasi tentang fachri aditya di internet
2025-07-31 19:06:40,856 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-07-31 19:06:40,857 - MCPLogger - INFO - [a9ced5e3] Intent: other (conf=0.80)
2025-07-31 19:06:41,702 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 19:06:41,703 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 19:06:41,712 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 19:06:41,713 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 19:06:42,431 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 19:06:42,990 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 19:06:43,271 - MCPLogger - INFO - [a9ced5e3] - Turn 1/20
2025-07-31 19:06:46,035 - MCPLogger - INFO - [a9ced5e3]  · tool 'websearch' args={'query': 'fachri aditya'}
2025-07-31 19:06:55,288 - MCPLogger - INFO - [a9ced5e3] - Turn 2/20
2025-07-31 19:07:13,923 - MCPLogger - INFO - [a9ced5e3] Total latency: 36.02s
2025-07-31 19:07:13,924 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 19:08:42,950 - MCPLogger - INFO - [39927d99] Processing query: 2 + 2 = ?
2025-07-31 19:08:44,630 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.99}
2025-07-31 19:08:44,631 - MCPLogger - INFO - [39927d99] Intent: other (conf=0.99)
2025-07-31 19:08:45,478 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 19:08:45,479 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 19:08:45,484 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 19:08:45,484 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 19:08:46,103 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 19:08:46,659 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 19:08:46,925 - MCPLogger - INFO - [39927d99] - Turn 1/20
2025-07-31 19:08:48,799 - MCPLogger - INFO - [39927d99] Total latency: 5.85s
2025-07-31 19:08:48,800 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 19:09:41,694 - MCPLogger - INFO - [b5969631] Processing query: ringkasan proyek bank sumsel babel
2025-07-31 19:09:43,671 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 19:09:43,672 - MCPLogger - INFO - [b5969631] Intent: other (conf=0.50)
2025-07-31 19:09:44,497 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 19:09:44,498 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 104, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 167, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-07-31 19:09:44,502 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 19:09:44,502 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 19:09:45,572 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 19:09:46,119 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 19:09:46,396 - MCPLogger - INFO - [b5969631] - Turn 1/20
2025-07-31 19:09:47,386 - MCPLogger - INFO - [b5969631]  · tool 'rag_retrieval' args={'query': 'proyek bank sumsel babel'}
2025-07-31 19:09:49,388 - MCPLogger - INFO - [b5969631] - Turn 2/20
2025-07-31 19:10:07,226 - MCPLogger - INFO - [b5969631] Total latency: 25.53s
2025-07-31 19:10:07,227 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 20:50:40,605 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 20:50:50,203 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 20:54:36,009 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 20:54:40,519 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 20:55:20,472 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 20:55:25,422 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 20:55:43,739 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 20:55:48,005 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 20:55:53,075 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 20:55:57,749 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 20:56:26,997 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 20:56:31,917 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 20:56:40,884 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 20:56:45,954 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 20:56:49,052 - MCPLogger - INFO - Cleaning up before new connection...
2025-07-31 20:56:49,053 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 20:56:49,053 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 20:56:49,694 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 20:56:52,178 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 20:56:52,179 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 20:57:18,374 - MCPLogger - INFO - [cfa5830b] Processing query: Halo
2025-07-31 20:57:22,796 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 20:57:22,797 - MCPLogger - INFO - [cfa5830b] Intent: other (conf=0.50)
2025-07-31 20:57:23,414 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 20:57:23,415 - MCPLogger - INFO - Cleaning up before new connection...
2025-07-31 20:57:23,415 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 20:57:23,415 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 20:57:24,025 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 20:57:24,583 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 20:57:24,584 - MCPLogger - WARNING - Attempt 2: MCP session closed, reconnecting...
2025-07-31 20:57:24,585 - MCPLogger - INFO - Cleaning up before new connection...
2025-07-31 20:57:24,586 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 20:57:24,587 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 20:57:24,588 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 20:57:25,192 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 20:57:25,746 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 20:57:25,747 - MCPLogger - INFO - [cfa5830b] Total latency: 7.37s
2025-07-31 20:57:25,748 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 21:03:45,278 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 21:03:50,481 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 21:04:28,568 - MCPLogger - INFO - Cleaning up before new connection...
2025-07-31 21:04:28,569 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 21:04:28,570 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 21:04:29,182 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 21:04:31,540 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 21:04:31,542 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 21:04:39,947 - MCPLogger - INFO - [bd1359f0] Processing query: halo
2025-07-31 21:04:43,625 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 21:04:43,625 - MCPLogger - INFO - [bd1359f0] Intent: other (conf=0.50)
2025-07-31 21:04:44,746 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 21:04:44,747 - MCPLogger - INFO - Cleaning up before new connection...
2025-07-31 21:04:44,747 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 21:04:44,748 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 21:04:45,280 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 21:04:45,834 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 21:04:45,835 - MCPLogger - WARNING - Attempt 2: MCP session closed, reconnecting...
2025-07-31 21:04:45,836 - MCPLogger - INFO - Cleaning up before new connection...
2025-07-31 21:04:45,836 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 21:04:45,836 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 21:04:45,837 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 21:04:46,365 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 21:04:46,906 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 21:04:46,907 - MCPLogger - INFO - [bd1359f0] Total latency: 6.96s
2025-07-31 21:04:46,908 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 21:08:13,058 - MCPLogger - INFO - [64a564e4] Processing query: halo
2025-07-31 21:08:15,292 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 21:08:15,292 - MCPLogger - INFO - [64a564e4] Intent: other (conf=0.50)
2025-07-31 21:08:16,255 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 21:08:16,255 - MCPLogger - INFO - Cleaning up before new connection...
2025-07-31 21:08:16,255 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 21:08:16,256 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 21:08:16,768 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 21:08:17,308 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 21:08:17,312 - MCPLogger - WARNING - Attempt 2: MCP session closed, reconnecting...
2025-07-31 21:08:17,313 - MCPLogger - INFO - Cleaning up before new connection...
2025-07-31 21:08:17,313 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 21:08:17,314 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 21:08:17,314 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 21:08:17,834 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 21:08:18,382 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 21:08:18,383 - MCPLogger - INFO - [64a564e4] Total latency: 5.33s
2025-07-31 21:08:18,383 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 21:10:25,195 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 21:10:29,720 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 21:10:38,713 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 21:10:44,321 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 21:11:09,346 - MCPLogger - INFO - Cleaning up before new connection...
2025-07-31 21:11:09,347 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 21:11:09,347 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 21:11:10,011 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 21:11:12,305 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 21:11:12,306 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 21:11:12,312 - MCPLogger - INFO - [824a5f1f] Processing query: halo
2025-07-31 21:11:14,185 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-07-31 21:11:14,185 - MCPLogger - INFO - [824a5f1f] Intent: other (conf=0.50)
2025-07-31 21:11:15,134 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-07-31 21:11:15,135 - MCPLogger - INFO - Cleaning up before new connection...
2025-07-31 21:11:15,135 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 21:11:15,135 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 21:11:15,805 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 21:11:16,351 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 21:11:16,353 - MCPLogger - WARNING - Attempt 2: MCP session closed, reconnecting...
2025-07-31 21:11:16,353 - MCPLogger - INFO - Cleaning up before new connection...
2025-07-31 21:11:16,354 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 21:11:16,354 - MCPLogger - INFO - MCPClient disconnected
2025-07-31 21:11:16,354 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-07-31 21:11:17,141 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-07-31 21:11:17,689 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-07-31 21:11:17,690 - MCPLogger - INFO - [824a5f1f] Total latency: 5.38s
2025-07-31 21:11:17,691 - MCPLogger - INFO - keep_alive_loop cancelled
2025-07-31 21:12:04,306 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 21:12:11,607 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-07-31 21:12:25,156 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-07-31 21:12:30,989 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 12:05:10,831 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 12:05:26,061 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 12:05:28,191 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 12:05:35,189 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 12:19:22,684 - MCPLogger - INFO - MCPClient disconnected
2025-08-01 12:19:22,685 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-08-01 12:19:23,688 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-08-01 12:19:28,911 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-08-01 12:19:28,913 - MCPLogger - INFO - keep_alive_loop cancelled
2025-08-01 12:19:36,838 - MCPLogger - INFO - [a35a3624] Processing query: halo
2025-08-01 12:19:40,008 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-08-01 12:19:40,008 - MCPLogger - INFO - [a35a3624] Intent: other (conf=0.50)
2025-08-01 12:19:40,955 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-08-01 12:19:40,956 - MCPLogger - ERROR - cleanup failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 106, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 169, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-08-01 12:19:40,986 - MCPLogger - INFO - MCPClient disconnected
2025-08-01 12:19:40,988 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-08-01 12:19:41,711 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-08-01 12:19:42,281 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-08-01 12:19:42,583 - MCPLogger - INFO - [a35a3624] - Turn 1/20
2025-08-01 12:19:44,574 - MCPLogger - INFO - [a35a3624] Total latency: 7.74s
2025-08-01 12:19:44,575 - MCPLogger - INFO - keep_alive_loop cancelled
2025-08-01 13:04:56,238 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 13:05:21,055 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 13:05:32,424 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 13:05:41,102 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 13:05:53,968 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 13:06:03,944 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 13:06:29,891 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 13:06:37,542 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 13:06:49,966 - MCPLogger - INFO - MCPClient disconnected
2025-08-01 13:06:49,967 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-08-01 13:06:50,787 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-08-01 13:06:54,342 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-08-01 13:06:54,343 - MCPLogger - INFO - keep_alive_loop cancelled
2025-08-01 13:07:25,446 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 13:07:32,420 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 13:07:35,155 - MCPLogger - INFO - MCPClient disconnected
2025-08-01 13:07:35,156 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-08-01 13:07:35,758 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-08-01 13:07:38,962 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-08-01 13:07:38,965 - MCPLogger - INFO - keep_alive_loop cancelled
2025-08-01 13:12:28,316 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 13:12:36,718 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 13:12:42,002 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 13:12:49,471 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 13:16:08,091 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 13:16:14,609 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 13:16:16,625 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 13:16:24,253 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 13:16:24,432 - MCPLogger - INFO - MCPClient disconnected
2025-08-01 13:16:24,433 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-08-01 13:16:25,697 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-08-01 13:16:29,658 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-08-01 13:16:29,659 - MCPLogger - INFO - keep_alive_loop cancelled
2025-08-01 17:00:10,500 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 17:00:38,619 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 17:08:15,742 - MCPLogger - INFO - MCPClient disconnected
2025-08-01 17:08:15,743 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-08-01 17:08:16,616 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-08-01 17:08:21,455 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-08-01 17:08:21,457 - MCPLogger - INFO - keep_alive_loop cancelled
2025-08-01 17:08:21,503 - MCPLogger - INFO - [adebce69] Processing query: halo
2025-08-01 17:08:26,341 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.5}
2025-08-01 17:08:26,342 - MCPLogger - INFO - [adebce69] Intent: other (conf=0.50)
2025-08-01 17:08:29,095 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-08-01 17:08:29,096 - MCPLogger - ERROR - cleanup session failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 117, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 181, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-08-01 17:08:29,125 - MCPLogger - INFO - MCPClient disconnected
2025-08-01 17:08:29,125 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-08-01 17:08:30,003 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-08-01 17:08:30,547 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-08-01 17:08:30,828 - MCPLogger - INFO - [adebce69] - Turn 1/20
2025-08-01 17:08:33,109 - MCPLogger - INFO - [adebce69] Total latency: 11.61s
2025-08-01 17:08:33,110 - MCPLogger - INFO - keep_alive_loop cancelled
2025-08-01 17:10:03,377 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 17:10:21,557 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 17:10:31,362 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 17:10:39,978 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 17:10:41,752 - MCPLogger - DEBUG - Logger initialized from D:\1. PROJECTS\projectwise_flaskui\runserver.py, writing to D:\1. PROJECTS\projectwise_flaskui\logs\mcp_generic.log
2025-08-01 17:10:49,027 - MCPLogger - INFO - MCPClient initialized with HTTP transport
2025-08-01 17:14:57,101 - MCPLogger - INFO - MCPClient disconnected
2025-08-01 17:14:57,102 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-08-01 17:14:58,145 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-08-01 17:15:01,515 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-08-01 17:15:01,516 - MCPLogger - INFO - keep_alive_loop cancelled
2025-08-01 17:15:01,543 - MCPLogger - INFO - [81392f98] Processing query: cari informasi di internet tentang rafly fasha purnomo putra
2025-08-01 17:15:03,836 - MCPLogger - INFO - Raw router output: {"intent":"other","confidence_score":0.8}
2025-08-01 17:15:03,837 - MCPLogger - INFO - [81392f98] Intent: other (conf=0.80)
2025-08-01 17:15:04,759 - MCPLogger - WARNING - Attempt 1: MCP session closed, reconnecting...
2025-08-01 17:15:04,759 - MCPLogger - ERROR - cleanup session failed: Attempted to exit cancel scope in a different task than it was entered in
Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 117, in get_tools
    tools_result = await self.session.list_tools()  # type: ignore
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\client\session.py", line 386, in list_tools
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 261, in send_request
    await self._write_stream.send(SessionMessage(message=JSONRPCMessage(jsonrpc_request), metadata=metadata))
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 242, in send
    self.send_nowait(item)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\streams\memory.py", line 211, in send_nowait
    raise ClosedResourceError
anyio.ClosedResourceError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\1. PROJECTS\projectwise_flaskui\services\mcp_client.py", line 181, in cleanup
    await self.session.__aexit__(None, None, None)
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\mcp\shared\session.py", line 218, in __aexit__
    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
    return self.cancel_scope.__exit__(exc_type, exc_val, exc_tb)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\1. PROJECTS\projectwise_flaskui\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 457, in __exit__
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-08-01 17:15:04,775 - MCPLogger - INFO - MCPClient disconnected
2025-08-01 17:15:04,776 - MCPLogger - INFO - Connecting to MCP Server via HTTP: http://localhost:5000/projectwise/mcp
2025-08-01 17:15:05,568 - MCPLogger - INFO - Connected to MCP Server via HTTP
2025-08-01 17:15:06,109 - MCPLogger - INFO - Available tools: ['heartbeat', 'list_kak_files', 'list_product_files', 'add_product_knowledge', 'add_kak_tor_knowledge', 'summarize_kak_with_llm', 'rag_retrieval', 'list_metadata_entries', 'reset_vector_database', 'reset_and_reingest_all', 'read_project_markdown', 'get_template_placeholders', 'generate_proposal_docx', 'websearch']
2025-08-01 17:15:06,385 - MCPLogger - INFO - [81392f98] - Turn 1/20
2025-08-01 17:15:07,861 - MCPLogger - INFO - [81392f98]  · tool 'websearch' args={'query': 'rafly fasha purnomo putra'}
2025-08-01 17:15:10,536 - MCPLogger - INFO - [81392f98] - Turn 2/20
2025-08-01 17:15:26,508 - MCPLogger - INFO - [81392f98] Total latency: 24.96s
2025-08-01 17:15:26,509 - MCPLogger - INFO - keep_alive_loop cancelled
